{"ast":null,"code":"// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License. See License.txt in the project root for license information.\nimport * as tslib_1 from \"tslib\";\nimport { HttpHeaders } from \"../httpHeaders\";\nimport { Constants } from \"../util/constants\";\nimport { getDefaultUserAgentKey, getPlatformSpecificData } from \"./msRestUserAgentPolicy\";\nimport { BaseRequestPolicy } from \"./requestPolicy\";\n\nfunction getRuntimeInfo() {\n  var msRestRuntime = {\n    key: \"ms-rest-js\",\n    value: Constants.msRestVersion\n  };\n  return [msRestRuntime];\n}\n\nfunction getUserAgentString(telemetryInfo, keySeparator, valueSeparator) {\n  if (keySeparator === void 0) {\n    keySeparator = \" \";\n  }\n\n  if (valueSeparator === void 0) {\n    valueSeparator = \"/\";\n  }\n\n  return telemetryInfo.map(function (info) {\n    var value = info.value ? \"\" + valueSeparator + info.value : \"\";\n    return \"\" + info.key + value;\n  }).join(keySeparator);\n}\n\nexport var getDefaultUserAgentHeaderName = getDefaultUserAgentKey;\nexport function getDefaultUserAgentValue() {\n  var runtimeInfo = getRuntimeInfo();\n  var platformSpecificData = getPlatformSpecificData();\n  var userAgent = getUserAgentString(runtimeInfo.concat(platformSpecificData));\n  return userAgent;\n}\nexport function userAgentPolicy(userAgentData) {\n  var key = !userAgentData || userAgentData.key == undefined ? getDefaultUserAgentKey() : userAgentData.key;\n  var value = !userAgentData || userAgentData.value == undefined ? getDefaultUserAgentValue() : userAgentData.value;\n  return {\n    create: function (nextPolicy, options) {\n      return new UserAgentPolicy(nextPolicy, options, key, value);\n    }\n  };\n}\n\nvar UserAgentPolicy =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(UserAgentPolicy, _super);\n\n  function UserAgentPolicy(_nextPolicy, _options, headerKey, headerValue) {\n    var _this = _super.call(this, _nextPolicy, _options) || this;\n\n    _this._nextPolicy = _nextPolicy;\n    _this._options = _options;\n    _this.headerKey = headerKey;\n    _this.headerValue = headerValue;\n    return _this;\n  }\n\n  UserAgentPolicy.prototype.sendRequest = function (request) {\n    this.addUserAgentHeader(request);\n    return this._nextPolicy.sendRequest(request);\n  };\n\n  UserAgentPolicy.prototype.addUserAgentHeader = function (request) {\n    if (!request.headers) {\n      request.headers = new HttpHeaders();\n    }\n\n    if (!request.headers.get(this.headerKey) && this.headerValue) {\n      request.headers.set(this.headerKey, this.headerValue);\n    }\n  };\n\n  return UserAgentPolicy;\n}(BaseRequestPolicy);\n\nexport { UserAgentPolicy };","map":{"version":3,"sources":["../../../lib/policies/userAgentPolicy.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License. See License.txt in the project root for license information.\nimport * as tslib_1 from \"tslib\";\nimport { HttpHeaders } from \"../httpHeaders\";\nimport { Constants } from \"../util/constants\";\nimport { getDefaultUserAgentKey, getPlatformSpecificData } from \"./msRestUserAgentPolicy\";\nimport { BaseRequestPolicy } from \"./requestPolicy\";\nfunction getRuntimeInfo() {\n    var msRestRuntime = {\n        key: \"ms-rest-js\",\n        value: Constants.msRestVersion\n    };\n    return [msRestRuntime];\n}\nfunction getUserAgentString(telemetryInfo, keySeparator, valueSeparator) {\n    if (keySeparator === void 0) { keySeparator = \" \"; }\n    if (valueSeparator === void 0) { valueSeparator = \"/\"; }\n    return telemetryInfo.map(function (info) {\n        var value = info.value ? \"\" + valueSeparator + info.value : \"\";\n        return \"\" + info.key + value;\n    }).join(keySeparator);\n}\nexport var getDefaultUserAgentHeaderName = getDefaultUserAgentKey;\nexport function getDefaultUserAgentValue() {\n    var runtimeInfo = getRuntimeInfo();\n    var platformSpecificData = getPlatformSpecificData();\n    var userAgent = getUserAgentString(runtimeInfo.concat(platformSpecificData));\n    return userAgent;\n}\nexport function userAgentPolicy(userAgentData) {\n    var key = (!userAgentData || userAgentData.key == undefined) ? getDefaultUserAgentKey() : userAgentData.key;\n    var value = (!userAgentData || userAgentData.value == undefined) ? getDefaultUserAgentValue() : userAgentData.value;\n    return {\n        create: function (nextPolicy, options) {\n            return new UserAgentPolicy(nextPolicy, options, key, value);\n        }\n    };\n}\nvar UserAgentPolicy = /** @class */ (function (_super) {\n    tslib_1.__extends(UserAgentPolicy, _super);\n    function UserAgentPolicy(_nextPolicy, _options, headerKey, headerValue) {\n        var _this = _super.call(this, _nextPolicy, _options) || this;\n        _this._nextPolicy = _nextPolicy;\n        _this._options = _options;\n        _this.headerKey = headerKey;\n        _this.headerValue = headerValue;\n        return _this;\n    }\n    UserAgentPolicy.prototype.sendRequest = function (request) {\n        this.addUserAgentHeader(request);\n        return this._nextPolicy.sendRequest(request);\n    };\n    UserAgentPolicy.prototype.addUserAgentHeader = function (request) {\n        if (!request.headers) {\n            request.headers = new HttpHeaders();\n        }\n        if (!request.headers.get(this.headerKey) && this.headerValue) {\n            request.headers.set(this.headerKey, this.headerValue);\n        }\n    };\n    return UserAgentPolicy;\n}(BaseRequestPolicy));\nexport { UserAgentPolicy };\n//# sourceMappingURL=userAgentPolicy.js.map"]},"metadata":{},"sourceType":"module"}