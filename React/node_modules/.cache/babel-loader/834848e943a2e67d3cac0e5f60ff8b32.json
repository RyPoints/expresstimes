{"ast":null,"code":"'use strict';\n\nconst AuthSwitchRequest = require('./auth_switch_request');\n\nconst AuthSwitchRequestMoreData = require('./auth_switch_request_more_data');\n\nconst AuthSwitchResponse = require('./auth_switch_response');\n\nconst BinaryRow = require('./binary_row');\n\nconst BinlogDump = require('./binlog_dump');\n\nconst ChangeUser = require('./change_user');\n\nconst CloseStatement = require('./close_statement');\n\nconst ColumnDefinition = require('./column_definition');\n\nconst Execute = require('./execute');\n\nconst Handshake = require('./handshake');\n\nconst HandshakeResponse = require('./handshake_response');\n\nconst PrepareStatement = require('./prepare_statement');\n\nconst PreparedStatementHeader = require('./prepared_statement_header');\n\nconst Query = require('./query');\n\nconst RegisterSlave = require('./register_slave');\n\nconst ResultsetHeader = require('./resultset_header');\n\nconst SslRequest = require('./ssl_request');\n\nconst TextRow = require('./text_row');\n\nconst ctorArr = [AuthSwitchRequest, AuthSwitchRequestMoreData, AuthSwitchResponse, BinaryRow, BinlogDump, ChangeUser, CloseStatement, ColumnDefinition, Execute, Handshake, HandshakeResponse, PrepareStatement, PreparedStatementHeader, Query, RegisterSlave, ResultsetHeader, SslRequest, TextRow];\nctorArr.forEach(ctor => {\n  module.exports[ctor.name] = ctor; // monkey-patch it to include name if debug is on\n\n  if (process.env.NODE_DEBUG) {\n    if (ctor.prototype.toPacket) {\n      const old = ctor.prototype.toPacket;\n\n      ctor.prototype.toPacket = function () {\n        const p = old.call(this);\n        p._name = ctor.name;\n        return p;\n      };\n    }\n  }\n}); // simple packets:\n\nconst Packet = require('./packet');\n\nexports.Packet = Packet;\n\nclass OK {\n  static toPacket(args, encoding) {\n    args = args || {};\n    const affectedRows = args.affectedRows || 0;\n    const insertId = args.insertId || 0;\n    const serverStatus = args.serverStatus || 0;\n    const warningCount = args.warningCount || 0;\n    const message = args.message || '';\n    let length = 9 + Packet.lengthCodedNumberLength(affectedRows);\n    length += Packet.lengthCodedNumberLength(insertId);\n    const buffer = Buffer.allocUnsafe(length);\n    const packet = new Packet(0, buffer, 0, length);\n    packet.offset = 4;\n    packet.writeInt8(0);\n    packet.writeLengthCodedNumber(affectedRows);\n    packet.writeLengthCodedNumber(insertId);\n    packet.writeInt16(serverStatus);\n    packet.writeInt16(warningCount);\n    packet.writeString(message, encoding);\n    packet._name = 'OK';\n    return packet;\n  }\n\n}\n\nexports.OK = OK; // warnings, statusFlags\n\nclass EOF {\n  static toPacket(warnings, statusFlags) {\n    if (typeof warnings === 'undefined') {\n      warnings = 0;\n    }\n\n    if (typeof statusFlags === 'undefined') {\n      statusFlags = 0;\n    }\n\n    const packet = new Packet(0, Buffer.allocUnsafe(9), 0, 9);\n    packet.offset = 4;\n    packet.writeInt8(0xfe);\n    packet.writeInt16(warnings);\n    packet.writeInt16(statusFlags);\n    packet._name = 'EOF';\n    return packet;\n  }\n\n}\n\nexports.EOF = EOF;\n\nclass Error {\n  static toPacket(args, encoding) {\n    const length = 13 + Buffer.byteLength(args.message, 'utf8');\n    const packet = new Packet(0, Buffer.allocUnsafe(length), 0, length);\n    packet.offset = 4;\n    packet.writeInt8(0xff);\n    packet.writeInt16(args.code); // TODO: sql state parameter\n\n    packet.writeString('#_____', encoding);\n    packet.writeString(args.message, encoding);\n    packet._name = 'Error';\n    return packet;\n  }\n\n}\n\nexports.Error = Error;","map":{"version":3,"sources":["/Users/ryandavis/Development/reactapp/expresstimes/node_modules/mysql2/lib/packets/index.js"],"names":["AuthSwitchRequest","require","AuthSwitchRequestMoreData","AuthSwitchResponse","BinaryRow","BinlogDump","ChangeUser","CloseStatement","ColumnDefinition","Execute","Handshake","HandshakeResponse","PrepareStatement","PreparedStatementHeader","Query","RegisterSlave","ResultsetHeader","SslRequest","TextRow","ctorArr","forEach","ctor","module","exports","name","process","env","NODE_DEBUG","prototype","toPacket","old","p","call","_name","Packet","OK","args","encoding","affectedRows","insertId","serverStatus","warningCount","message","length","lengthCodedNumberLength","buffer","Buffer","allocUnsafe","packet","offset","writeInt8","writeLengthCodedNumber","writeInt16","writeString","EOF","warnings","statusFlags","Error","byteLength","code"],"mappings":"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","sourcesContent":["'use strict';\n\nconst AuthSwitchRequest = require('./auth_switch_request');\nconst AuthSwitchRequestMoreData = require('./auth_switch_request_more_data');\nconst AuthSwitchResponse = require('./auth_switch_response');\nconst BinaryRow = require('./binary_row');\nconst BinlogDump = require('./binlog_dump');\nconst ChangeUser = require('./change_user');\nconst CloseStatement = require('./close_statement');\nconst ColumnDefinition = require('./column_definition');\nconst Execute = require('./execute');\nconst Handshake = require('./handshake');\nconst HandshakeResponse = require('./handshake_response');\nconst PrepareStatement = require('./prepare_statement');\nconst PreparedStatementHeader = require('./prepared_statement_header');\nconst Query = require('./query');\nconst RegisterSlave = require('./register_slave');\nconst ResultsetHeader = require('./resultset_header');\nconst SslRequest = require('./ssl_request');\nconst TextRow = require('./text_row');\n\nconst ctorArr = [\n  AuthSwitchRequest,\n  AuthSwitchRequestMoreData,\n  AuthSwitchResponse,\n  BinaryRow,\n  BinlogDump,\n  ChangeUser,\n  CloseStatement,\n  ColumnDefinition,\n  Execute,\n  Handshake,\n  HandshakeResponse,\n  PrepareStatement,\n  PreparedStatementHeader,\n  Query,\n  RegisterSlave,\n  ResultsetHeader,\n  SslRequest,\n  TextRow\n];\nctorArr.forEach(ctor => {\n  module.exports[ctor.name] = ctor;\n  // monkey-patch it to include name if debug is on\n  if (process.env.NODE_DEBUG) {\n    if (ctor.prototype.toPacket) {\n      const old = ctor.prototype.toPacket;\n      ctor.prototype.toPacket = function() {\n        const p = old.call(this);\n        p._name = ctor.name;\n        return p;\n      };\n    }\n  }\n});\n\n// simple packets:\nconst Packet = require('./packet');\nexports.Packet = Packet;\n\nclass OK {\n  static toPacket(args, encoding) {\n    args = args || {};\n    const affectedRows = args.affectedRows || 0;\n    const insertId = args.insertId || 0;\n    const serverStatus = args.serverStatus || 0;\n    const warningCount = args.warningCount || 0;\n    const message = args.message || '';\n\n    let length = 9 + Packet.lengthCodedNumberLength(affectedRows);\n    length += Packet.lengthCodedNumberLength(insertId);\n\n    const buffer = Buffer.allocUnsafe(length);\n    const packet = new Packet(0, buffer, 0, length);\n    packet.offset = 4;\n    packet.writeInt8(0);\n    packet.writeLengthCodedNumber(affectedRows);\n    packet.writeLengthCodedNumber(insertId);\n    packet.writeInt16(serverStatus);\n    packet.writeInt16(warningCount);\n    packet.writeString(message, encoding);\n    packet._name = 'OK';\n    return packet;\n  }\n}\n\nexports.OK = OK;\n\n// warnings, statusFlags\nclass EOF {\n  static toPacket(warnings, statusFlags) {\n    if (typeof warnings === 'undefined') {\n      warnings = 0;\n    }\n    if (typeof statusFlags === 'undefined') {\n      statusFlags = 0;\n    }\n    const packet = new Packet(0, Buffer.allocUnsafe(9), 0, 9);\n    packet.offset = 4;\n    packet.writeInt8(0xfe);\n    packet.writeInt16(warnings);\n    packet.writeInt16(statusFlags);\n    packet._name = 'EOF';\n    return packet;\n  }\n}\n\nexports.EOF = EOF;\n\nclass Error {\n  static toPacket(args, encoding) {\n    const length = 13 + Buffer.byteLength(args.message, 'utf8');\n    const packet = new Packet(0, Buffer.allocUnsafe(length), 0, length);\n    packet.offset = 4;\n    packet.writeInt8(0xff);\n    packet.writeInt16(args.code);\n    // TODO: sql state parameter\n    packet.writeString('#_____', encoding);\n    packet.writeString(args.message, encoding);\n    packet._name = 'Error';\n    return packet;\n  }\n}\n\nexports.Error = Error;\n"]},"metadata":{},"sourceType":"script"}