{"ast":null,"code":"'use strict';\n\nconst Promise = require('../../promise');\n\nclass ResourceLock {\n  constructor(resource) {\n    this.resource = resource;\n    this.previous = Promise.resolve(resource);\n  }\n\n  unwrap() {\n    return this.resource;\n  }\n\n  lock() {\n    const lock = this.previous;\n    let resolve;\n    this.previous = new Promise(r => {\n      resolve = r;\n    });\n    return lock.disposer(resolve);\n  }\n\n}\n\nmodule.exports = ResourceLock;","map":{"version":3,"sources":["/Users/ryandavis/Development/reactapp5/expresstimes/node_modules/sequelize/lib/dialects/mssql/resource-lock.js"],"names":["Promise","require","ResourceLock","constructor","resource","previous","resolve","unwrap","lock","r","disposer","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,OAAO,GAAGC,OAAO,CAAC,eAAD,CAAvB;;AAEA,MAAMC,YAAN,CAAmB;AACjBC,EAAAA,WAAW,CAACC,QAAD,EAAW;AACpB,SAAKA,QAAL,GAAgBA,QAAhB;AACA,SAAKC,QAAL,GAAgBL,OAAO,CAACM,OAAR,CAAgBF,QAAhB,CAAhB;AACD;;AAEDG,EAAAA,MAAM,GAAG;AACP,WAAO,KAAKH,QAAZ;AACD;;AAEDI,EAAAA,IAAI,GAAG;AACL,UAAMA,IAAI,GAAG,KAAKH,QAAlB;AACA,QAAIC,OAAJ;AACA,SAAKD,QAAL,GAAgB,IAAIL,OAAJ,CAAYS,CAAC,IAAI;AAC/BH,MAAAA,OAAO,GAAGG,CAAV;AACD,KAFe,CAAhB;AAGA,WAAOD,IAAI,CAACE,QAAL,CAAcJ,OAAd,CAAP;AACD;;AAjBgB;;AAoBnBK,MAAM,CAACC,OAAP,GAAiBV,YAAjB","sourcesContent":["'use strict';\n\nconst Promise = require('../../promise');\n\nclass ResourceLock {\n  constructor(resource) {\n    this.resource = resource;\n    this.previous = Promise.resolve(resource);\n  }\n\n  unwrap() {\n    return this.resource;\n  }\n\n  lock() {\n    const lock = this.previous;\n    let resolve;\n    this.previous = new Promise(r => {\n      resolve = r;\n    });\n    return lock.disposer(resolve);\n  }\n}\n\nmodule.exports = ResourceLock;\n"]},"metadata":{},"sourceType":"script"}