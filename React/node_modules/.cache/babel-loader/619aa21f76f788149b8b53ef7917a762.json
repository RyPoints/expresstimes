{"ast":null,"code":"'use strict';\n\nconst Command = require('./command');\n\nconst CommandCode = require('../constants/commands');\n\nconst Packet = require('../packets/packet'); // TODO: time statistics?\n// usefull for queue size and network latency monitoring\n// store created,sent,reply timestamps\n\n\nclass Ping extends Command {\n  constructor(callback) {\n    super();\n    this.onResult = callback;\n  }\n\n  start(packet, connection) {\n    const ping = new Packet(0, Buffer.from([1, 0, 0, 0, CommandCode.PING]), 0, 5);\n    connection.writePacket(ping);\n    return Ping.prototype.pingResponse;\n  }\n\n  pingResponse() {\n    // TODO: check it's OK packet. error check already done in caller\n    if (this.onResult) {\n      process.nextTick(this.onResult.bind(this));\n    }\n\n    return null;\n  }\n\n}\n\nmodule.exports = Ping;","map":{"version":3,"sources":["/Users/ryandavis/Development/reactapp/expresstimes/node_modules/mysql2/lib/commands/ping.js"],"names":["Command","require","CommandCode","Packet","Ping","constructor","callback","onResult","start","packet","connection","ping","Buffer","from","PING","writePacket","prototype","pingResponse","process","nextTick","bind","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,OAAO,GAAGC,OAAO,CAAC,WAAD,CAAvB;;AACA,MAAMC,WAAW,GAAGD,OAAO,CAAC,uBAAD,CAA3B;;AACA,MAAME,MAAM,GAAGF,OAAO,CAAC,mBAAD,CAAtB,C,CAEA;AACA;AACA;;;AACA,MAAMG,IAAN,SAAmBJ,OAAnB,CAA2B;AACzBK,EAAAA,WAAW,CAACC,QAAD,EAAW;AACpB;AACA,SAAKC,QAAL,GAAgBD,QAAhB;AACD;;AAEDE,EAAAA,KAAK,CAACC,MAAD,EAASC,UAAT,EAAqB;AACxB,UAAMC,IAAI,GAAG,IAAIR,MAAJ,CACX,CADW,EAEXS,MAAM,CAACC,IAAP,CAAY,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAaX,WAAW,CAACY,IAAzB,CAAZ,CAFW,EAGX,CAHW,EAIX,CAJW,CAAb;AAMAJ,IAAAA,UAAU,CAACK,WAAX,CAAuBJ,IAAvB;AACA,WAAOP,IAAI,CAACY,SAAL,CAAeC,YAAtB;AACD;;AAEDA,EAAAA,YAAY,GAAG;AACb;AACA,QAAI,KAAKV,QAAT,EAAmB;AACjBW,MAAAA,OAAO,CAACC,QAAR,CAAiB,KAAKZ,QAAL,CAAca,IAAd,CAAmB,IAAnB,CAAjB;AACD;;AACD,WAAO,IAAP;AACD;;AAvBwB;;AA0B3BC,MAAM,CAACC,OAAP,GAAiBlB,IAAjB","sourcesContent":["'use strict';\n\nconst Command = require('./command');\nconst CommandCode = require('../constants/commands');\nconst Packet = require('../packets/packet');\n\n// TODO: time statistics?\n// usefull for queue size and network latency monitoring\n// store created,sent,reply timestamps\nclass Ping extends Command {\n  constructor(callback) {\n    super();\n    this.onResult = callback;\n  }\n\n  start(packet, connection) {\n    const ping = new Packet(\n      0,\n      Buffer.from([1, 0, 0, 0, CommandCode.PING]),\n      0,\n      5\n    );\n    connection.writePacket(ping);\n    return Ping.prototype.pingResponse;\n  }\n\n  pingResponse() {\n    // TODO: check it's OK packet. error check already done in caller\n    if (this.onResult) {\n      process.nextTick(this.onResult.bind(this));\n    }\n    return null;\n  }\n}\n\nmodule.exports = Ping;\n"]},"metadata":{},"sourceType":"script"}